<div class="container-fluid py-5">

  <!-- Header -->
  <div class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center mb-4 gap-2">
    <h1 class="h3 mb-0">Subscriptions</h1>
    <a href="/super-admin/subscriptions/create"
       class="btn btn-primary mt-2 mt-md-0">
      Create New Subscription
    </a>
  </div>

  {{> flashMessages}}

  <!-- IMPORTANT: wrapper for horizontal scroll -->
  <div class="table-responsive">
    <table
      id="subscriptionTable"
      class="table table-striped table-bordered w-100 align-middle"
      style="min-width: 1100px;">
      <thead class="table-light">
        <tr>
          <th>School</th>
          <th>Plan</th>
          <th>Amount Paid</th>
          <th>Payment Method</th>
          <th>Start Date</th>
          <th>End Date</th>
          <th>Status</th>
          <th style="min-width: 180px;">Actions</th>
        </tr>
      </thead>
      <tbody>
        {{#each subscriptions}}
        <tr>
          <td>{{this.school.name}}</td>
          <td>{{this.plan.name}}</td>
          <td>{{this.amountPaid}} {{this.currency}}</td>
          <td>{{this.paymentMethod}}</td>
          <td>{{formatDate this.startDate "YYYY-MM-DD"}}</td>
          <td>{{formatDate this.endDate "YYYY-MM-DD"}}</td>
          <td>
            {{#if (eq this.status "active")}}
              <span class="badge bg-success">Active</span>
            {{else}}
              <span class="badge bg-danger">{{this.status}}</span>
            {{/if}}
          </td>
          <td>
            <div class="d-flex gap-2">
              <a href="/super-admin/subscriptions/edit/{{this._id}}"
                 class="btn btn-sm btn-outline-primary">
                Edit
              </a>
              <form
                action="/super-admin/subscriptions/delete/{{this._id}}"
                method="POST"
                onsubmit="return confirm('Are you sure?');">
                <button class="btn btn-sm btn-outline-danger">
                  Delete
                </button>
              </form>
            </div>
          </td>
        </tr>
        {{/each}}
      </tbody>
    </table>
  </div>

</div>

{{#section "styles"}}
<link
  href="https://cdn.datatables.net/1.13.8/css/dataTables.bootstrap5.min.css"
  rel="stylesheet">
{{/section}}


<script src="https://cdn.datatables.net/1.13.8/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.8/js/dataTables.bootstrap5.min.js"></script>

<script>
  $(document).ready(function () {
    $('#subscriptionTable').DataTable({
      scrollX: true,
      autoWidth: false,
      responsive: false,
      pageLength: 10,
      order: []
    });
  });
</script>
