<div class="container-fluid py-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="h3">All Plans</h1>
    <a href="/super-admin/plans/create" class="btn btn-primary">
      <i class="bi bi-plus-lg me-1"></i> Add New Plan
    </a>
  </div>

  {{> flashMessages}}

  <div class="row g-4">
    {{#each plans}}
    <div class="col-md-6 col-lg-4">
      <div class="card shadow-sm h-100">
        <div class="card-body d-flex flex-column">
          <!-- Card Header -->
          <div class="d-flex justify-content-between align-items-center mb-2">
            <h5 class="card-title mb-0">{{this.name}}</h5>
            {{#if this.isActive}}
              <span class="badge bg-success">Active</span>
            {{else}}
              <span class="badge bg-secondary">Inactive</span>
            {{/if}}
          </div>

          <!-- Price -->
          <h6 class="card-subtitle mb-3 text-muted">
            <i class="bi bi-currency-dollar me-1"></i> {{this.price}} 
            {{#if this.billingCycle}}/ {{this.billingCycle}}{{/if}}
          </h6>

          <!-- Description -->
          {{#if this.description}}
            <p class="card-text mb-2">{{this.description}}</p>
          {{/if}}

          <!-- Features -->
          {{#if this.features}}
          <ul class="list-unstyled mb-3 small text-muted">
            {{#each this.features}}
              <li><i class="bi bi-check2-circle text-success me-1"></i>{{this}}</li>
            {{/each}}
          </ul>
          {{/if}}

          <!-- Resource Limits with space-between -->
          <div class="mb-3 small text-muted">
            <div class="d-flex justify-content-between">
              <span><i class="bi bi-people me-1"></i> Students</span>
              <span>{{#if this.maxStudents}}{{this.maxStudents}}{{else}}Unlimited{{/if}}</span>
            </div>
            <div class="d-flex justify-content-between">
              <span><i class="bi bi-person-badge me-1"></i> Staff</span>
              <span>{{#if this.maxStaff}}{{this.maxStaff}}{{else}}Unlimited{{/if}}</span>
            </div>
            <div class="d-flex justify-content-between">
              <span><i class="bi bi-journal-bookmark me-1"></i> Classes</span>
              <span>{{#if this.maxClasses}}{{this.maxClasses}}{{else}}Unlimited{{/if}}</span>
            </div>
            <div class="d-flex justify-content-between">
              <span><i class="bi bi-grid-1x2 me-1"></i> Sections</span>
              <span>{{#if this.maxSections}}{{this.maxSections}}{{else}}Unlimited{{/if}}</span>
            </div>
          </div>

          <!-- Action Buttons -->
          <div class="mt-auto d-flex gap-2">
            <a href="/super-admin/plans/edit/{{this._id}}" class="btn btn-sm btn-outline-primary w-50">
              <i class="bi bi-pencil-square me-1"></i> Edit
            </a>
            <form action="/super-admin/plans/delete/{{this._id}}" method="POST" class="w-50">
              <button type="submit" class="btn btn-sm btn-outline-danger w-100" onclick="return confirm('Are you sure you want to delete this plan?');">
                <i class="bi bi-trash me-1"></i> Delete
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
    {{else}}
    <div class="col-12">
      <div class="alert alert-info mb-0">
        No plans found. <a href="/super-admin/plans/create" class="alert-link">Add a new plan</a>.
      </div>
    </div>
    {{/each}}
  </div>
</div>
