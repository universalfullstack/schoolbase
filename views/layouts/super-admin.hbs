<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>{{title}}</title>

  <!-- Bootstrap CSS -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />

  <!-- Bootstrap Icons -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
    rel="stylesheet"
  />

  <!-- Custom Styles -->
  <link rel="stylesheet" href="/css/style.css" />

  <style>
    body {
      overflow-x: hidden;
    }

    /* Desktop sidebar */
    .sidebar {
      width: 260px;
    }

    @media (min-width: 992px) {
      .sidebar {
        position: fixed;
        top: 0;
        bottom: 0;
        left: 0;
        z-index: 1030;
      }

      .content-wrapper {
        margin-left: 260px;
      }
    }

    .sidebar .btn {
      border-radius: .5rem;
    }
  </style>

  {{{_sections.styles}}}
</head>

<body class="bg-light">

<!-- ===================== TOPBAR ===================== -->
<nav class="navbar navbar-light bg-white border-bottom sticky-top">
  <div class="container-fluid">

    <!-- Mobile menu toggle -->
    <button
      class="btn btn-outline-secondary d-lg-none"
      data-bs-toggle="offcanvas"
      data-bs-target="#mobileSidebar">
      <i class="bi bi-list"></i>
    </button>

    <!-- Brand -->
    <span class="navbar-brand fw-semibold d-none d-lg-block">
      Super Admin
    </span>

    <!-- User Dropdown -->
    <div class="dropdown">
      <button
        class="btn d-flex align-items-center gap-2"
        data-bs-toggle="dropdown">

        <img
          src="{{#if user.profileImage}}{{user.profileImage}}{{else}}/images/avatar.png{{/if}}"
          class="rounded-circle"
          width="36"
          height="36"
          alt="User">

        <i class="bi bi-chevron-down"></i>
      </button>

      <ul class="dropdown-menu dropdown-menu-end">
        <li class="px-3 py-2">
          <div class="fw-semibold">{{user.firstName}} {{user.lastName}}</div>
          <small class="text-muted">{{user.role}}</small>
        </li>
        <li><hr class="dropdown-divider"></li>
        <li>
          <a class="dropdown-item" href="/super-admin/profile">
            <i class="bi bi-person me-2"></i> Profile
          </a>
        </li>
        <li>
          <a class="dropdown-item" href="/super-admin/settings">
            <i class="bi bi-gear me-2"></i> Settings
          </a>
        </li>
        <li><hr class="dropdown-divider"></li>
        <li>
          <a class="dropdown-item text-danger" href="/logout">
            <i class="bi bi-box-arrow-right me-2"></i> Logout
          </a>
        </li>
      </ul>
    </div>

  </div>
</nav>

<!-- ===================== DESKTOP SIDEBAR ===================== -->
<aside class="sidebar bg-white border-end d-none d-lg-flex flex-column p-3">

  <ul class="list-unstyled">

    <!-- Dashboard -->
    <li class="mb-1">
      <a
        href="/super-admin/dashboard"
        class="btn w-100 text-start d-flex align-items-center
        {{#ifActive '/super-admin/dashboard'}}bg-primary bg-opacity-10 text-primary{{/ifActive}}">
        <i class="bi bi-speedometer2 me-2"></i>
        Dashboard
      </a>
    </li>

    <!-- Accordion Menu -->
    <li>
      <div class="accordion accordion-flush" id="adminMenu">

        <!-- Schools -->
        <div class="accordion-item">
          <h2 class="accordion-header">
            <button
              class="accordion-button collapsed"
              data-bs-toggle="collapse"
              data-bs-target="#schoolsMenu">
              <i class="bi bi-mortarboard me-2"></i> Schools
            </button>
          </h2>
          <div
            id="schoolsMenu"
            class="accordion-collapse collapse {{#ifActivePrefix currentPath '/super-admin/schools'}}show{{/ifActivePrefix}}">
            <div class="accordion-body py-2">
              <a href="/super-admin/schools" class="btn btn-sm w-100 text-start">All Schools</a>
              <a href="/super-admin/schools/create/new" class="btn btn-sm w-100 text-start">Create School</a>
            </div>
          </div>
        </div>

        <!-- Sessions -->
        <div class="accordion-item">
          <h2 class="accordion-header">
            <button class="accordion-button collapsed" data-bs-toggle="collapse" data-bs-target="#sessionsMenu">
              <i class="bi bi-calendar-event me-2"></i> Sessions
            </button>
          </h2>
          <div id="sessionsMenu" class="accordion-collapse collapse">
            <div class="accordion-body py-2">
              <a href="/super-admin/sessions" class="btn btn-sm w-100 text-start">All Sessions</a>
              <a href="/super-admin/sessions/create" class="btn btn-sm w-100 text-start">Create Session</a>
            </div>
          </div>
        </div>

      </div>
    </li>

    <!-- Administration -->
    <li class="text-muted small mt-4 mb-2">Administration</li>

    <li class="mb-1">
      <a href="/super-admin/plans" class="btn w-100 text-start">
        <i class="bi bi-layers me-2"></i> Plans
      </a>
    </li>

    <li class="mb-1">
      <a href="/super-admin/subscriptions" class="btn w-100 text-start">
        <i class="bi bi-check2-square me-2"></i> Subscriptions
      </a>
    </li>

  </ul>
</aside>

<!-- ===================== MOBILE OFFCANVAS ===================== -->
<div class="offcanvas offcanvas-start" id="mobileSidebar">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title">Menu</h5>
    <button class="btn-close" data-bs-dismiss="offcanvas"></button>
  </div>
  <div class="offcanvas-body">
    {{!-- reuse same nav partial if you want --}}
    {{> super-admin-navLinks }}
  </div>
</div>

<!-- ===================== PAGE CONTENT ===================== -->
<main class="content-wrapper p-4">
  {{{body}}}
</main>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

{{{_sections.scripts}}}
</body>
</html>
